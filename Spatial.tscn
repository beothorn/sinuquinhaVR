[gd_scene load_steps=22 format=2]

[ext_resource path="res://Game.gd" type="Script" id=1]
[ext_resource path="res://Controller.gd" type="Script" id=2]
[ext_resource path="res://cueStickTransparent.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/testPoolRoom/testPoolRoom.fbx" type="PackedScene" id=4]
[ext_resource path="res://assets/Oculus Touch for Quest 2/right_joy.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/Oculus Touch for Quest 2/left_joy.tscn" type="PackedScene" id=6]
[ext_resource path="res://assets/cueStick/cueStick.fbx" type="PackedScene" id=7]
[ext_resource path="res://assets/8ball/8Ball.fbx" type="PackedScene" id=8]
[ext_resource path="res://resources/ballPhysics.tres" type="PhysicsMaterial" id=9]

[sub_resource type="CylinderShape" id=1]
radius = 0.0109022
height = 1.54559

[sub_resource type="CylinderShape" id=5]
radius = 0.0184151
height = 0.369625

[sub_resource type="VisualShader" id=6]
code = "shader_type spatial;
render_mode specular_schlick_ggx;




void vertex() {
// Output:0

}

void fragment() {
// Output:0

}

void light() {
// Output:0

}
"
graph_offset = Vector2( 35, 60 )

[sub_resource type="ShaderMaterial" id=7]
shader = SubResource( 6 )

[sub_resource type="SphereShape" id=8]
radius = 0.0399023

[sub_resource type="ProceduralSky" id=9]

[sub_resource type="Environment" id=10]
background_mode = 2
background_sky = SubResource( 9 )
background_color = Color( 1, 1, 1, 1 )

[sub_resource type="PhysicsMaterial" id=12]
friction = 0.26

[sub_resource type="BoxShape" id=2]
extents = Vector3( 1.08249, 0.165069, 0.806488 )

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0.145098, 0.4, 0.0313726, 1 )

[sub_resource type="PhysicsMaterial" id=11]
bounce = 0.7

[sub_resource type="BoxShape" id=4]
extents = Vector3( 0.0886674, 0.110912, 1 )

[node name="Game" type="Spatial"]
script = ExtResource( 1 )
debug = true

[node name="Camera" type="Camera" parent="."]
transform = Transform( -0.999998, -0.000443373, -0.00171229, -0.00170828, -0.0088726, 0.999959, -0.000458547, 0.999961, 0.00887183, 0, 2.88716, 0.0232201 )
projection = 1
size = 2.36392

[node name="World" type="Spatial" parent="."]
visible = false

[node name="testPoolRoom" parent="World" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.10356, 0.0265717, 0.0262829 )

[node name="VRPlayer" type="ARVROrigin" parent="."]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.229113, -0.473156 )

[node name="VRCamera" type="ARVRCamera" parent="VRPlayer"]

[node name="LeftController" type="ARVRController" parent="VRPlayer"]
visible = false
script = ExtResource( 2 )

[node name="leftJoy" parent="VRPlayer/LeftController" instance=ExtResource( 6 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0 )

[node name="RightController" type="ARVRController" parent="VRPlayer"]
controller_id = 2
script = ExtResource( 2 )

[node name="rightJoy" parent="VRPlayer/RightController" instance=ExtResource( 5 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0 )
visible = false

[node name="CueStickModel" parent="VRPlayer/RightController" instance=ExtResource( 7 )]
transform = Transform( 0.878237, -0.184714, 0.441113, -0.216965, 0.668105, 0.711731, -0.426177, -0.720775, 0.546678, 0.287943, -1.02112, 1.15157 )

[node name="hitterPosition" type="CSGCylinder" parent="VRPlayer/RightController"]
transform = Transform( 0.949916, -0.185489, 0.251503, -0.0668408, 0.665576, 0.743331, -0.305274, -0.722913, 0.619843, 0.0372834, -0.0674395, 0.129184 )
visible = false
radius = 0.0133578
height = 0.368617
sides = 19

[node name="CueStickModelTransparent" parent="VRPlayer/RightController" instance=ExtResource( 3 )]
transform = Transform( 0.878237, -0.184714, 0.441113, -0.216964, 0.668105, 0.711732, -0.426177, -0.720775, 0.546678, 0.288, -1.021, 1.152 )
visible = false

[node name="Area" type="Area" parent="VRPlayer/RightController"]
collision_layer = 4
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="VRPlayer/RightController/Area"]
transform = Transform( 0.96503, -0.192544, 0.177886, -0.00519256, 0.664422, 0.74734, -0.262087, -0.722129, 0.640187, 0.147147, -0.483706, 0.572933 )
shape = SubResource( 1 )

[node name="CueStick" type="RigidBody" parent="."]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.229113, -2.01364 )
visible = false
collision_layer = 4
collision_mask = 2
custom_integrator = true
contacts_reported = 1
contact_monitor = true

[node name="CollisionShape" type="CollisionShape" parent="CueStick"]
shape = SubResource( 5 )

[node name="model" parent="CueStick" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.40991, 0 )

[node name="WhiteBall" type="RigidBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.755318, 1.0618, -0.616758 )
collision_layer = 2
collision_mask = 7
physics_material_override = ExtResource( 9 )
continuous_cd = true
linear_damp = 1.2
angular_damp = 1.2

[node name="CueBall" type="CSGSphere" parent="WhiteBall"]
radius = 0.04054
material = SubResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="WhiteBall"]
shape = SubResource( 8 )

[node name="Ball" type="RigidBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.554856, 1.06883, 0.392794 )
collision_mask = 3
physics_material_override = ExtResource( 9 )
continuous_cd = true
linear_damp = 1.5
angular_damp = 1.5

[node name="8Ball" parent="Ball" instance=ExtResource( 8 )]

[node name="CollisionShape" type="CollisionShape" parent="Ball"]
shape = SubResource( 8 )

[node name="Ball2" type="RigidBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.661888, 1.06883, 0.0138821 )
collision_mask = 3
physics_material_override = ExtResource( 9 )
continuous_cd = true
linear_damp = 1.2
angular_damp = 1.2

[node name="8Ball" parent="Ball2" instance=ExtResource( 8 )]

[node name="CollisionShape" type="CollisionShape" parent="Ball2"]
shape = SubResource( 8 )

[node name="CueStick2" type="RigidBody" parent="."]
transform = Transform( -0.995973, -0.0896592, -9.09898e-08, -8.74228e-08, -4.37114e-08, 1, -0.0896592, 0.995973, 3.56971e-08, 0.779452, 1.05965, -0.888009 )
collision_layer = 4
collision_mask = 2
custom_integrator = true
contacts_reported = 1
contact_monitor = true

[node name="CollisionShape" type="CollisionShape" parent="CueStick2"]
shape = SubResource( 5 )

[node name="model" parent="CueStick2" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.40991, 0 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 10 )

[node name="PoolTable" type="Spatial" parent="."]

[node name="PoolTableMat" type="StaticBody" parent="PoolTable"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15787, -0.0040558 )
collision_mask = 3
physics_material_override = SubResource( 12 )

[node name="CollisionShape" type="CollisionShape" parent="PoolTable/PoolTableMat"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.102253, 1.01203, 0 )
shape = SubResource( 2 )

[node name="CSGBox" type="CSGBox" parent="PoolTable/PoolTableMat/CollisionShape"]
width = 2.16068
height = 0.329901
depth = 1.60576
material = SubResource( 3 )

[node name="PoolTableBorders" type="StaticBody" parent="PoolTable"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00609207, 0 )
physics_material_override = SubResource( 11 )

[node name="CollisionShape2" type="CollisionShape" parent="PoolTable/PoolTableBorders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.940996, 0.99038, -0.0040558 )
shape = SubResource( 4 )

[node name="CSGBox" type="CSGBox" parent="PoolTable/PoolTableBorders/CollisionShape2"]
width = 0.183011
height = 0.235365

[node name="CollisionShape3" type="CollisionShape" parent="PoolTable/PoolTableBorders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.13858, 0.99038, -0.0040558 )
shape = SubResource( 4 )

[node name="CSGBox" type="CSGBox" parent="PoolTable/PoolTableBorders/CollisionShape3"]
width = 0.183011
height = 0.235365

[node name="CollisionShape4" type="CollisionShape" parent="PoolTable/PoolTableBorders"]
transform = Transform( -4.37114e-08, -4.37114e-08, -1, 4.37114e-08, 1, -4.37114e-08, 1, -4.37114e-08, -4.37114e-08, -0.0858085, 0.99038, 0.882861 )
shape = SubResource( 4 )

[node name="CSGBox" type="CSGBox" parent="PoolTable/PoolTableBorders/CollisionShape4"]
width = 0.183011
height = 0.235365

[node name="CollisionShape5" type="CollisionShape" parent="PoolTable/PoolTableBorders"]
transform = Transform( -4.37114e-08, -4.37114e-08, -1, 4.37114e-08, 1, -4.37114e-08, 1, -4.37114e-08, -4.37114e-08, -0.0858085, 0.99038, -0.849143 )
shape = SubResource( 4 )

[node name="CSGBox" type="CSGBox" parent="PoolTable/PoolTableBorders/CollisionShape5"]
width = 0.183011
height = 0.235365

[connection signal="body_entered" from="CueStick" to="." method="_on_CueStick_body_entered"]
[connection signal="body_entered" from="CueStick2" to="." method="_on_CueStick_body_entered"]
